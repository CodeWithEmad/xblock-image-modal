[tox]
envlist = csslint,eslint,py27,pycodestyle,pylint

[testenv:py27]
deps =
    -e.
    coverage
commands =
    coverage run manage.py test {posargs}
    coverage report
    coverage html

[testenv:csslint]
whitelist_externals = {toxinidir}/node_modules/csslint/dist/cli.js
passenv = TRAVIS TRAVIS_JOB_ID TRAVIS_BRANCH
commands =
    {toxinidir}/node_modules/csslint/dist/cli.js {toxinidir}/imagemodal/public/

[testenv:eslint]
whitelist_externals = {toxinidir}/node_modules/eslint/bin/eslint.js
passenv = TRAVIS TRAVIS_JOB_ID TRAVIS_BRANCH
commands =
    {toxinidir}/node_modules/eslint/bin/eslint.js --fix {toxinidir}/imagemodal/public/view.js

[testenv:pycodestyle]
passenv = TRAVIS TRAVIS_JOB_ID TRAVIS_BRANCH
deps =
    -e.
    pycodestyle
commands =
    pycodestyle {toxinidir}/imagemodal/

[testenv:pylint]
passenv = TRAVIS TRAVIS_JOB_ID TRAVIS_BRANCH
deps =
    -e.
    pylint
commands =
    pylint {toxinidir}/imagemodal/
